<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <meta name="description" content="" />
  <meta name="author" content="" />

  <title>SB Admin 2 - Blank</title>

  <!-- Custom fonts for this template-->
  <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css" />
  <link
    href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i"
    rel="stylesheet" />

  <!-- Custom styles for this template-->
  <link href="css/sb-admin-2.min.css" rel="stylesheet" />
</head>

<body id="page-top">
  <!-- Page Wrapper -->
  <div id="wrapper">
    <!-- Sidebar -->
    <ul class="navbar-nav bg-gradient-primary sidebar sidebar-dark accordion" id="accordionSidebar">

      <!-- Sidebar - Brand -->
      <a class="sidebar-brand d-flex align-items-center justify-content-center" href="dashboard.html">
        <div class="sidebar-brand-icon rotate-n-15">
          <i class="fas fa-laugh-wink"></i>
        </div>
        <div class="sidebar-brand-text mx-3">Thrive Together</div>
      </a>

      <!-- Divider -->
      <hr class="sidebar-divider my-0">

      <!-- Nav Item - Dashboard -->
      <li class="nav-item active">
        <a class="nav-link" href="dashboard.html">
          <i class="fas fa-fw fa-tachometer-alt"></i>
          <span>Dashboard</span></a>
      </li>

      <!-- Divider -->
      <hr class="sidebar-divider">

      <!-- Heading -->
      <div class="sidebar-heading">
        Student AI
      </div>
      <li class="nav-item">
        <a class="nav-link" href="cv_generator.html">
          <i class="fas fa-fw fa-table"></i>
          <span>Resume AI</span></a>
      </li>

      <hr class="sidebar-divider">

      <div class="sidebar-heading">
        Artifacts
      </div>

      <li class="nav-item">
        <a class="nav-link" href="view_cv.html">
          <i class="fas fa-fw fa-table"></i>
          <span>All Resumes</span></a>
      </li>
      <!-- Nav Item - Charts -->
      <li class="nav-item">
        <a class="nav-link" href="#">
          <i class="fas fa-fw fa-chart-area"></i>
          <span>Interviews</span></a>
      </li>

      <hr class="sidebar-divider d-none d-md-block">
      <div class="text-center d-none d-md-inline">
        <button class="rounded-circle border-0" id="sidebarToggle"></button>
      </div>

    </ul>

    <!-- Sidebar Toggler (Sidebar) -->
    <div class="text-center d-none d-md-inline">
      <button class="rounded-circle border-0" id="sidebarToggle"></button>
    </div>
    </ul>
    <!-- End of Sidebar -->

    <!-- Content Wrapper -->
    <div id="content-wrapper" class="d-flex flex-column">
      <!-- Main Content -->
      <div id="content">
        <!-- Topbar -->
        <nav class="navbar navbar-expand navbar-light bg-white topbar mb-4 static-top shadow">
          <!-- Sidebar Toggle (Topbar) -->
          <button id="sidebarToggleTop" class="btn btn-link d-md-none rounded-circle mr-3">
            <i class="fa fa-bars"></i>
          </button>

          <!-- Topbar Search -->


          <!-- Topbar Navbar -->
          <ul class="navbar-nav ml-auto">
            <!-- Nav Item - User Information -->
            <li class="nav-item dropdown no-arrow">
              <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button" data-toggle="dropdown"
                aria-haspopup="true" aria-expanded="false">
                <span class="mr-2 d-none d-lg-inline text-gray-600 small">Prashant Dey</span>
                <img class="img-profile rounded-circle" src="img/undraw_profile.svg">
              </a>
              <!-- Dropdown - User Information -->
              <div class="dropdown-menu dropdown-menu-right shadow animated--grow-in" aria-labelledby="userDropdown">
                <a class="dropdown-item" href="profile_page.html">
                  <i class="fas fa-user fa-sm fa-fw mr-2 text-gray-400"></i>
                  Profile
                </a>
                <a class="dropdown-item" href="edit_profile_page.html">
                  <i class="fas fa-user fa-sm fa-fw mr-2 text-gray-400"></i>
                  Edit Profile
                </a>
                <!-- <a class="dropdown-item" href="#">
                          <i class="fas fa-user fa-sm fa-fw mr-2 text-gray-400"></i>
                          Edit Profile Picture
                      </a>
                      <a class="dropdown-item" href="#">
                          <i class="fas fa-cogs fa-sm fa-fw mr-2 text-gray-400"></i>
                          Settings -->
                </a>
                <div class="dropdown-divider"></div>
                <a class="dropdown-item" href="#" data-toggle="modal" data-target="#logoutModal">
                  <i class="fas fa-sign-out-alt fa-sm fa-fw mr-2 text-gray-400"></i>
                  Logout
                </a>
              </div>
            </li>

          </ul>
          </ul>
        </nav>
        <!-- End of Topbar -->

        <!-- Begin Page Content -->
        <div class="container-fluid">
          <!-- Page Heading -->

          <div class="container mt-5">
            <h2>User Profile</h2>

            <!-- Personal Information Section -->
            <div class="card mb-4">
              <div class="card-header">Personal Information</div>
              <div class="card-body">
                <div id="userInfo">
                  <p><strong> Name: </strong> <span id="name"></span></p>
                  <p>Email: <span id="email"></span></p>
                  <p>Phone: <span id="phone"></span></p>
                  <p>Address: <span id="address"></span></p>
                  <p>About: <span id="about"></span></p>
                </div>
              </div>
            </div>

            <!-- Educational Qualifications Section -->
            <div class="card mb-4">
              <div class="card-header">Educational Qualifications</div>
              <div class="card-body" id="educationSection">
                <div class="education-item">
                  <p>College Name:<span name="collegeName" id="collegeName"></span></p>
                  <p>Degree:<span name="degree" id="degree"></span></p>
                  <p>Years:<span name="years" id="years"></span></p>
                  <p>Specialization:<span name="specialization" id="specialization"></span></p>
                </div>
              </div>
            </div>

            <!-- Professional Qualifications Section -->
            <div class="card mb-4">
              <div class="card-header">Professional Qualifications</div>
              <div class="card-body" id="viewProfessionalSection">
                <p>Comapany Name:<span id="company-name"></span></p>
                <p>From:<span id="from"></span></p>
                <p>To:<span id="to"></span></p>
                <p>Role:<span id="role"></span></p>
                <p>Description<span id="description"></span></p>
              </div>
            </div>

            <div class="card mb-4">
              <div class="card-header">Projects</div>
              <div class="card-body" id="viewProjectSection">
                <p>Project Name:<span id="project-name"></span></p>
                <p>
                  Project Description:<span id="project-description"></span>
                </p>
                <p>Skills Used:<span id="skills-used"></span></p>
                <p>Project link:<span id="project-link"></span></p>
              </div>
            </div>

            <!-- Certifications Section -->
            <h5>Certifications</h5>
            <div id="certificationsSection">
              <div class="certification-item">
                <div class="form-group">
                  <label for="certification">Certification</label>
                 
                </div>
                <div class="form-group">
                  <label for="certification">Issuer</label>
                  
                </div>
                <hr />
              </div>
            </div>
          
            

            <!-- Special Achievements Section -->
            <div class="card mb-4">
              <div class="card-header">Special Achievements</div>
              <div class="card-body" id="viewAchievementsSection">
                <p>
                  Special Achievement<span id="special-achievement"></span>
                </p>
              </div>
            </div>

            <!-- Skills Section -->
            <div class="card mb-4">
              <div class="card-header">Skills</div>
              <div class="card-body">
                <p><strong>Skills:</strong> <span id="skills"></span></p>
              </div>
            </div>
            <script src="./url.js"></script>
            <script>
              document.addEventListener("DOMContentLoaded", function () {
                let uid = localStorage.getItem("uid");

                if (uid) {
                  const apiUrl = config.userUrl + `/api/userDetails/${uid}`
                  fetch(apiUrl, {
                    headers: {
                      Authorization:
                        "Bearer " + localStorage.getItem("token"),
                    },
                  })
                    .then((response) => response.json())
                    .then((data) => {
                      console.log("Received data: ", data[0]);
                      if (data && data.length > 0) {
                        populateContent(data[0]);
                      }
                    })
                    .catch((error) =>
                      console.error("Error fetching user data:", error)
                    );
                } else {
                  console.error("No user ID found in local storage.");
                }
              });

              function populateContent(data) {
                // Populate user information
                if (data.name) {
                  document.getElementById("name").textContent = data.name;
                }
                if (data.email) {
                  document.getElementById("email").textContent = data.email;
                }
                if (data.contactDetails && data.contactDetails.phone) {
                  document.getElementById("phone").textContent =
                    data.contactDetails.phone;
                }
                if (data.contactDetails && data.contactDetails.address) {
                  document.getElementById("address").textContent =
                    data.contactDetails.address;
                }
                if (data.about) {
                  document.getElementById("about").textContent = data.about;
                }

                // Populate educational qualifications

                if (
                  data.educationQualifications &&
                  data.educationQualifications.length > 0
                ) {
                  let educationalSection = document.getElementById(
                    "educationSection"
                  );
                  educationalSection.innerHTML = ""; // Clear existing content
                  data.educationQualifications.forEach((education) => {
                    console.log('Education: ', education)
                    let educationalItem = document.createElement("div");
                    educationalItem.classList.add("education-item");
                    educationalItem.innerHTML = `
        <p>College Name: <span name="collegeName">${education.collegeName
                      }</span></p>
        <p>Degree: <span name="degree">${education.degree
                      }</span></p>
        <p>Years: <span name="years">${education.years
                      }</span></p>
        <p>Specialization: <span name="specialization">${education.specialization}</span></p>
     
      `;
                    educationalSection.appendChild(educationalItem);
                  });
                }





                // Populate professional qualifications
                if (
                  data.professionalQualifications &&
                  data.professionalQualifications.length > 0
                ) {
                  let professionalSection = document.getElementById(
                    "viewProfessionalSection"
                  );
                  professionalSection.innerHTML = ""; // Clear existing content
                  data.professionalQualifications.forEach((professional) => {
                    let professionalItem = document.createElement("div");
                    console.log(professional)
                    professionalItem.classList.add("professional-item");
                    professionalItem.innerHTML = `
        <p>Company Name: <span name="companyName">${professional.companyName
                      }</span></p>
        <p>From: <span name="duration.from">${professional.duration.from.split("T")[0]
                      }</span></p>
        <p>To: <span name="duration.to">${professional.duration.to.split("T")[0]
                      }</span></p>
        <p>Role: <span name="role">${professional.role}</span></p>
        <p>Description: <span name="description">${professional.description
                      }</span></p>
        <p>Location: <span name="Location">${professional.location
                      }</span></p>
      `;
                    professionalSection.appendChild(professionalItem);
                  });
                }

                // Populate projects
                if (data.projects && data.projects.length > 0) {
                  let projectSection =
                    document.getElementById("viewProjectSection");
                  projectSection.innerHTML = ""; // Clear existing content
                  data.projects.forEach((project) => {
                    let projectItem = document.createElement("div");
                    console.log(project)
                    projectItem.classList.add("project-item");
                    projectItem.innerHTML = `
                      <p>Project Name: <span name="projectName">${project.projectName
                      }</span></p>
                        <p>Project Description: <span name="projectDescription">${project.projectDescription
                      }</span></p>
                     
                          <p>Project Link: <span name="projectLink">${project.projectLink
                      }</span></p>
                            `;
                    projectSection.appendChild(projectItem);



      //               if (
      //                 data.certifications &&
      //                 data.certifications.length > 0
      //               ) {
      //                 let certificationSection = document.getElementById(
      //                   "viewCertificationsSection"
      //                 );
      //                 certificationSection.innerHTML = ""; // Clear existing content
      //                 data.professionalQualifications.forEach((professional) => {
      //                   let professionalItem = document.createElement("div");
      //                   console.log(professional)
      //                   professionalItem.classList.add("professional-item");
      //                   professionalItem.innerHTML = `
      //   <p>Company Name: <span name="companyName">${professional.companyName
      //                     }</span></p>
      //   <p>From: <span name="duration.from">${professional.duration.from.split("T")[0]
      //                     }</span></p>
      //   <p>To: <span name="duration.to">${professional.duration.to.split("T")[0]
      //                     }</span></p>
      //   <p>Role: <span name="role">${professional.role}</span></p>
      //   <p>Description: <span name="description">${professional.description
      //                     }</span></p>
      //   <p>Location: <span name="Location">${professional.location
      //                     }</span></p>
      // `;
      //                   // professionalSection.appendChild(professionalItem);
      //                 });
      //               }





                    // console.log(project.skillsUsed[])
                    // 0console.log(project.skillsUsed.length)
                    // for(let i=0;i<project.skillsUsed.length;i++){
                    //   // console.log(project.skillsUsed[i].value)
                    //   let str=[]
                    //   str.push(project.skillsUsed[i].value)
                    //   console.log(str.toString())
                    // }
                    // console.log(str)
                    // document.getElementById("skills-used").textContent=str.toString()




                    // let skillsUsedSpan = document.getElementById(
                    //   `skillsUsed${index}`
                    // );
                    // if (project.skillsUsed && project.skillsUsed.length > 0) {
                    //   let skills = project.skillsUsed.map(
                    //     (skill) => JSON.parse(skill).value
                    //   );
                    //   new Tagify(skillsUsedSpan).addTags(skills);
                    // }
                  });
                }

                // Populate certifications
                data.certifications.map(certi => {
                  console.log('Certi: ', certi)
                  //Write js dom code to display
                  document.getElementById("certificationName").textContent=certi.certificationName
                  console.log(certi.certificationName)
                })



                data.certifications.forEach((certification, index) => {
                      if (index > 0)
                        document
                          .getElementById("addMorecertificationsSection")
                          .click();
                      let certificationItems = document.querySelectorAll( 
                        ".certification-item"
                      );
                      let certificationItem = certificationItems[index];
                      console.log('certificationItem: ',certification)
                      certificationItem.querySelector(
                        '[name="certification"]'
                      ).textContent = certification.certificationName;
                      certificationItem.querySelector(
                        '[name="certification-issuer"]'
                      ).textContent = certification.certificationIssuer;
                    });





                // Populate special achievements
                if (
                  data.specialAchievements &&
                  data.specialAchievements.length > 0
                ) {
                  data.specialAchievements.forEach((achievement, index) => {
                    if (index > 0) {
                      document
                        .getElementById("addMoreachievementsSection")
                        .click();
                    }
                    let achievementItems =
                      document.querySelectorAll(".achievement-item");
                    let achievementItem = achievementItems[index];
                    achievementItem.querySelector(
                      '[name="achievement"]'
                    ).textContent = achievement;
                  });
                }

                // Populate skills
                if (data.skills && data.skills.length > 0) {
                  let skillsSpan = document.getElementById("skills");
                  let skills = data.skills.map(
                    (skill) => JSON.parse(skill).value
                  );
                  skillsSpan.textContent = skills.join(", ");
                }
              }

            </script>
            <!-- Projects Section -->
            <!-- Button to Delete Profile Data -->
            <button type="button" class="btn btn-danger" id="deleteProfileData">
              Delete Profile Data
            </button>
          </div>
        </div>
        <!-- /.container-fluid -->
      </div>
      <div></div>
      <!-- End of Main Content -->

      <!-- Footer -->
      <footer class="sticky-footer bg-white">
        <div class="container my-auto">
          <div class="copyright text-center my-auto">
            <span>Copyright &copy; Your Website 2020</span>
          </div>
        </div>
      </footer>
      <!-- End of Footer -->
    </div>
    <!-- End of Content Wrapper -->
  </div>
  <!-- End of Page Wrapper -->

  <!-- Scroll to Top Button-->
  <a class="scroll-to-top rounded" href="#page-top">
    <i class="fas fa-angle-up"></i>
  </a>

  <!-- Logout Modal-->
  <div class="modal fade" id="logoutModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
    aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Ready to Leave?</h5>
          <button class="close" type="button" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">×</span>
          </button>
        </div>
        <div class="modal-body">
          Select "Logout" below if you are ready to end your current session.
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" type="button" data-dismiss="modal">
            Cancel
          </button>
          <a class="btn btn-primary" href="login.html">Logout</a>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap core JavaScript-->
  <script src="vendor/jquery/jquery.min.js"></script>
  <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

  <!-- Core plugin JavaScript-->
  <script src="vendor/jquery-easing/jquery.easing.min.js"></script>

  <!-- Custom scripts for all pages-->
  <script src="js/sb-admin-2.min.js"></script>
</body>

</html>